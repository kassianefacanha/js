<!DOCTYPE html>
<html>
<head>
    <title>Formulário</title>
    <meta charset="utf-8">
    <link rel="icon" href="favicon.png">
    <link rel="stylesheet" href="estilo.css">
</head>
<body> 
        <legend>Lista de Aniversário</legend>
        <hr>
        <label for="nome"><strong>Nome:</strong></label>
        <input id="nome" type=text required name=nome onmouseout="validar()" />
        <br><br>
        <label for="email"><strong>E-mail:</strong></label>
        <input id="email" type=text required name=email onmouseout="validar()"/>

        <br><br>
        <label for="data"><strong>Data:</strong></label>
        <input id="data" type=date required name=data onmouseout="validar()"/>
        <br><br>
        <ol>
            <li>
                
            <button id = "enviar" onclick="add()">Inserir</button>
            <button id = "limpar" onclick= "res()">Limpar</button>
            </li>
        </ol>
    <table id="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Email</th>
                <th>Aniver</th>
                <th>Excluir</th>
            </tr>
        </thead>
        <tbody>
            <!-- AQUI SERAO INSERIDOS OS DADOS -->
        </tbody>
    </table>


    <script>
        function validar() {
            let nome = document.getElementById("nome");
           let email = document.getElementById("email");
            let data = document.getElementById("data");
            if (nome == "" ||
                nome.length < 8) {
                alert("Ei, você precisa preencher o nome!");
                document.dados.nome.focus();
                return false;
            }

            if (email == "" ||
                email.indexOf('@') == -1 ||
                email.indexOf('.') == -1) {
                alert("Ei, você precisa preencher o e-mail!");
                document.dados.email.focus();
                return false;
            }

            if (data == "") {
                alert("Ei, você precisa informar a data!");
                document.dados.data.focus();
                return false;
            }
        }
            
let nome = document.getElementById("nome");
let email = document.getElementById("email");
let data = document.getElementById("data");

let niver = [];
let obj;

function dados(){
    table.innerHTML = "<td><th>ID</th><th>Nome</th><th>Email</th><th>Aniversário</th><th>Excluir</th></tr>";
    for (obj of niver){
        let table = document.getElementById("table");
        let newline = table.insertRow(-1);
        let a = newline.insertCell(0);
        let b = newline.insertCell(1);
        let c = newline.insertCell(2);
        let d = newline.insertCell(3);
        let e = newline.insertCell(4);
        a.innerHTML = niver.indexOf(obj);
        b.innerHTML = obj.nome;
        c.innerHTML = obj.email;
        d.innerHTML = obj.data;
        e.innerHTML = "<button class = 'excluir' onclick = 'exc( " + obj.id +" )'>Excluir</button>"
    }
}

function add(){
    let item = {nome : nome.value , email : email.value , data : data.value}
    niver.push(item)
    dados();
}

function res(){
    nome.value = "";
    email.value = "";
    data.value= "";
}

function exc(id){
    niver.splice(id , 1);
    dados();
}

    </script>

</body>

</html>